<!DOCTYPE html>
<html lang="en" >

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
   <title>Mesibo Live</title>
  
  <link rel="stylesheet" href="third-party/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-2/css/all.min.css" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
      
   <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
   <link href="styles/mesibolive.css" rel="stylesheet" >
   <link href="styles/live.css" rel="stylesheet">
   <link href="styles/popup.css" rel="stylesheet">
   <link href="styles/popupdesign.css" rel="stylesheet">
   <link href="drawingboard/board.css" rel="stylesheet" >

    <!--SCRIPTINCLUDESTART-->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"  crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    
    <script type="text/javascript" src="third-party/bootstrap.min.js"></script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.9/angular.min.js"></script>

    <script src="assets/scripts/platform.js"></script>
 

    <script type="text/javascript" src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
    <script type="text/javascript" src="https://api.mesibo.com/mesibo-v2.js" crossorigin="anonymous"></script>
    <script type="text/javascript" src="scripts/controller.js"></script>

    <script src="https://www.google.com/recaptcha/api.js"></script>


    <script type="text/javascript" src="mesibo/config.js"></script>    
    <script type="text/javascript" src="mesibo/utils.js"></script>
    <script type="text/javascript" src="mesibo/files.js"></script>

    <script type="text/javascript" src="scripts/app-utils.js"></script>
    <script type="text/javascript" src="scripts/login.js"></script>
    <script type="text/javascript" src="login/login.js"></script>
    <script type="text/javascript" src="scripts/controller.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.0.0/fabric.min.js"></script>
    <script type="text/javascript" src="drawingboard/board.js"></script>

    <!--SCRIPTINCLUDEEND-->  
</head>

<body ng-app="mlApp" id="mesiboliveapp" ng-controller="roomController" style="overflow: hidden;">
 
 <div style="position: fixed; height: 100vh;width: 100vw; background-color: hsl(0, 0%, 0%, 0.4); display: none; z-index: 100" id="permissions-prompt">
    <svg width="1000" height="1000" >
    <path d="M600 60 580 70 L600 80 Z" style="stroke:white; fill: white"></path>
        <line x1="600" y1="70" x2="680" y2="70" style="stroke:white;stroke-width:2" />        
    </svg>
    <div style="position: absolute;top:50px;left: 700px;margin: auto; color: white; font-size: 30px; font-style: italic;">
       Please grant required permissions
    </div>    
  </div> 
   <div style="max-width: 100%; background-color: hsl(0, 0%, 90%);" ng-show="!ultra_full_screen_mode">
        <nav class="navbar navbar-expand-md navbar-dark static-top" id="mesibo_live_main_navbar" style="margin-bottom: 0!important; background-color: #00868b; padding: 0!important">
      <a class="navbar-brand" href="#" style="margin-right: 5px!important">&nbsp;<img width="100px" src="assets/images/mesibo-logo.png">&nbsp; Live</a>
      <span class="connection-indicator" style="width:15px; height: 10px;border-radius: 70%;" ng-style ="{'background-color': getStatusIndicator(mesibo_connection_status)}"></span>

      <div>
        <ul class="navbar-nav">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" style="font-size: 15px"><i class="fa fa-angle-down"></i></a>
            <div class="dropdown-menu" aria-labelledby="dropdown01">
              <a class="dropdown-item" href="https://mesibo.com" target="_blank" ><i class="fa fa-home"></i> &nbsp;Mesibo Home</a>
              <a class="dropdown-item" href="https://mesibo.com/conferencing" target="_blank" ><i class="fa fa-star"></i> &nbsp;Features</a>
              <a class="dropdown-item" href="https://docs.mesibo.com/api/conferencing" target="_blank" ><i class="fa fa-book"></i>&nbsp; Documentation</a> 
              <a class="dropdown-item" href="https://github.com/mesibo/conferencing" target="_blank" ><i class="fab fa-github"></i>&nbsp;  Source Code</a>
      	    </div>
          </li>
        </ul>
      </div>

      <div ng-cloak="isMesiboConnected()" style="text-align: center; width: 100%; display: flex;justify-content: center; padding-left: 12%">                            
                <div class="btn-group navbar-icon-with-label" role="group" ng-show="room.publish" style="width:80px!important; cursor: pointer;" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i id="screenShareOptions" class='fa fa-desktop action-icon' ng-style ="{'color': local_screens.length > 0 ? '#FA8072':'white'}" title="Multiple Screen Sharing" ></i>
                    <div style="font-size: 10px;padding-top: 5px; cursor: pointer; font-family: Helvetica">Share Screen</div> 
                  <div class="dropdown-menu screen-share-options" aria-labelledby="screenShareOptions" style="background-color: #00868b; min-width: 30rem!important; font-size: 25px"> 
                    <a class="dropdown-item" ng-repeat="screen in local_screens track by $index" href="#" style="border-bottom: 1px solid  rgb(240,240,240);" >
                      <i class="fa fa-desktop" aria-hidden="true" style="color: white; width: 30px"></i><span style="color: white">&nbsp;Screen-{{$index+1}}</span>
                     <span style="float: right"> 
                      <i  ng-class="getVideoStatusClass(local_screens[$index])" ng-click="local_screens[$index].toggleVideoMute();" ng-attr-title="{{ !local_screens[$index].getMuteStatus(true)? 'Pause Screen': 'Play Screen'}}" style="color:white" aria-hidden="true"></i> 
                      <i class="fa fa-eye" aria-hidden="true" title="Preview Screen" ng-click="openScreenSharePreview(local_screens[$index])" style="color:white"></i>
                      <i class="fa fa-stop-circle" ng-click="MesiboGroupcall_OnHangup(local_screens[$index], MESIBOCALL_HANGUP_REASON_USER)" aria-hidden="true" style="color: #FA8072" title="Stop Screen"></i> 
                      </span>               
                    </a>                                           
                    <a class="dropdown-item" href="#" ng-click="streamFromScreen()" style="color: white"><i class="fa fa-plus" style="color: white;width: 25px; padding-left: 5px" aria-hidden="true"></i> Add Screen</a>
                  </div>
                </div>

                <a class="navbar-icon-with-label" style="width:100px!important" ng-click="toggleBoardMode()">
                    <span class="fas fa-paint-brush action-icon" aria-hidden="true" id="drawing-board-icon" style = "color: white; cursor:pointer;text-align: center;" title="Collaborative Drawing Board">
                    <div style="font-size: 10px; color: white; padding-top: 5px; font-family: Helvetica; font-weight: normal;">Drawing Board (Beta)</div>
                    </span>
                </a>

                <a class="navbar-icon-with-label" style="width:80px!important" ng-click="showPopupChat()">
                    <span class="fa fa-comments action-icon" aria-hidden="true" style = "color: white; cursor:pointer;text-align: center;" title="Group Chat with participants">
                    <div style="font-size: 10px; padding-top: 5px; font-family: Helvetica">Group Chat</div>
                    </span>
                </a>
                

                <a class="navbar-icon-with-label" ng-click="enterFullScreenMode()" >
                    <span class='fas fa-expand action-icon' style = "color:white;cursor:pointer;" title="Enter Full Screen Mode">
                    <div style="font-size: 10px; padding-top: 5px; font-family: Helvetica; font-weight: normal;">Full Screen</div>
                    </span>
                </a>

                <!-- <span class="navbar-icon-vertical-separator"></span> -->
                <div class="btn-group navbar-icon-with-label" role="group" style="width:80px!important">
                    <span class="fa fa-eye action-icon" aria-hidden="true" style="color: white; padding-left: 10px;cursor: pointer;" title="Speaker View Options"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                                         
                     <div style="font-size: 10px; padding-top: 5px; font-family: Helvetica; color: white!important">View Options</div>                 
                    </span>

                  <div class="dropdown-menu screen-share-options" style="background-color: #00868b; min-width: 10rem!important; font-size: 25px">
                    <a class="dropdown-item" href="#" ng-click="auto_hide_other_speakers = true; autoHideSpeakersStrip()" style="color: white"><i  ng-class="{'fa fa-check': auto_hide_other_speakers}"  style="color: white;width: 25px;  padding-right: 5px" aria-hidden="true"></i> Auto </a>                                                              
                    <a class="dropdown-item" href="#" ng-click="auto_hide_other_speakers=false;always_show_other_speakers = true;showSpeakersStrip()" style="color: white"><i ng-class="{'fa fa-check': !auto_hide_other_speakers && always_show_other_speakers}" style="color: white;width: 25px;  padding-right: 5px" aria-hidden="true"></i> Always View Others </a>
                    <a class="dropdown-item" href="#" ng-click="auto_hide_other_speakers=false;always_show_other_speakers = false; hideSpeakersStrip()" style="color: white"><i ng-class="{'fa fa-check': !auto_hide_other_speakers && !always_show_other_speakers}" style="color: white;width: 25px;  padding-right: 5px" aria-hidden="true"></i> Never View Others</a>
                  </div>
                </div>


                <a class="navbar-icon-with-label" style="width: 90px!important" ng-click="toggleActiveSpeakerMode()">
                    <span aria-hidden="true" ng-attr-title="{{ in_active_speaker_mode? 'Disable Active Speaker Mode': 'Enable Active Speaker Mode' }}" style="color: white; padding-left: 10px;cursor: pointer;" ng-style ="{'color': in_active_speaker_mode? '#FA8072':'white'}" >                   
                     <i class="fa fa-user-circle" style="font-size: 15px;"></i>
                     <i class="fa fa-wifi fa-rotate-90" style="margin-left: -10px; font-size: 25px" ></i>  
                     <div style="font-size: 10px; padding-top: 5px; font-family: Helvetica; color: white!important">Active Speaker</div>                 
                    </span>
                </a>

                <a class="navbar-icon-with-label" style="width: 90px!important" ng-click="toggleNameDisplay()" >
                    <span class="fa fa-id-card action-icon" aria-hidden="true" ng-style ="{'color': !display_names? '#FA8072':'white'}" style = "color: white; cursor:pointer;" ng-attr-title="{{ display_names? 'Hide Names': 'Show Names' }}">
                    <div style="font-size: 10px; padding-top: 5px; font-family: Helvetica; color: white";>{{display_names_placeholder}}</div>
                    </span>
                </a>

		<a class="navbar-icon-with-label" style="width: 90px!important" ng-if="isAdmin()" ng-click="toggleAdminMode()" >
                    <span class="fa fa-cogs action-icon" aria-hidden="true" ng-style ="{'color': admin_mode? '#FA8072':'white'}" style = "color: white; cursor:pointer;" ng-attr-title="{{ admin_mode? 'Disable Group Admin Mode': 'Enable Group Admin Mode' }}">
                    <div style="font-size: 10px; padding-top: 5px; font-family: Helvetica; color: white";>Admin</div>
                    </span>
                </a>

               <a class="navbar-icon-with-label" ng-if="hasInvitePins()" ng-click="showInviteForm()">
                    <span class="fa fa-user-plus action-icon" aria-hidden="true"  style = "color: white; cursor:pointer;"  title="Invite Friends and Family">
                    <div style="font-size: 10px; padding-top: 5px; font-family: Helvetica">Invite</div>
                    </span>
                </a> 

                <a class="navbar-icon-with-label" ng-click="showSelfInfoForm()">
                    <span class="fa fa-info action-icon" aria-hidden="true"  style = "color: white; cursor:pointer;" title="Who Am I?">
                    <div style="font-size: 10px; padding-top: 5px; font-family: Helvetica">Information</div>
                    </span>
                </a> 

                <a class="navbar-icon-with-label" ng-click="popupWindow('help.html', 'Help - Mesibo Live Demo', window, 900, 700);">
                    <span class="fa fa-question action-icon" aria-hidden="true" style = "color: white; cursor:pointer;" title="Controls Help">
                    <div style="font-size: 10px; padding-top: 5px; font-family: Helvetica">Help</div>
                    </span>
                </a>

                <a class="navbar-icon-with-label">
                    <span class="fa fa-power-off action-icon" aria-hidden="true" ng-click="exitPrompt()" style = "color: white; cursor:pointer;" title="Exit the room">
                    <div style="font-size: 10px; padding-top: 5px; font-family: Helvetica">Exit</div>
                    </span>
                </a>                        

      </div>      

      <span style="color: white;text-align: right;  font-size: 20px; width: 300px; cursor: default; text-overflow: ellipsis;white-space: nowrap;overflow: hidden; padding-right: 10px"   ng-attr-title="{{room.name}}" ng-cloak="room.name" >
        {{room.name}}
      </span>      
     
  </nav>

      <!--Self Info Modal Start-->            
            <div id="ModalSelfInfo" class="modal fade">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title">{{getUserName()}}</h3>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form role="form" method="POST" action="">
                            <input type="hidden" name="_token" value="">
                            <div class="form-group">
                                <label class="control-label"><strong>User ID</strong></label>
                                <div>
					<input type="name" class="form-control input-lg" value="{{getUid()}}" disabled>
                                </div>
                                <br>
                                <label class="control-label"><strong>Phone</strong></label>
                                <div>
					<input type="text" class="form-control input-lg" value="+{{getAddress()}}" disabled>
                                </div>                                
                                <br>

                                <label class="col-12 control-label text-center my-0 mx-auto"><strong>Online in the following room(s)</strong></label>
                                <hr style="border: 0; height: 1px; background-image: -webkit-linear-gradient(left, #f0f0f0, #8c8b8b, #f0f0f0);background-image: -moz-linear-gradient(left, #f0f0f0, #8c8b8b, #f0f0f0);background-image: -ms-linear-gradient(left, #f0f0f0, #8c8b8b, #f0f0f0);background-image: -o-linear-gradient(left, #f0f0f0, #8c8b8b, #f0f0f0); ">
                                <div>
                                    <strong>Room Name</strong>: &nbsp; {{getRoomName()}} &nbsp;<strong> Room ID </strong>: &nbsp; {{getRoomId()}} &nbsp;
                                </div>                                    
                                </div>
                            </div>
                        </form>            
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->

      <!--Self Info Modal End-->

      <!--Exit Room Modal Start -->
          <div id="ModalExitForm" class="modal fade">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title mx-auto" style="text-align: center;width: 100%">Do you want to exit the room ?</h5>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form role="form" action="">                          
                            <div class="form-group">
                                <div style="text-align: center;">
                                    <button type="button" class="btn btn-danger" ng-click="exitRoom()">Exit</button>
                                    <button type="button" class="btn btn-success" data-dismiss="modal">Cancel</button>
                                </div>
                                
                            </div>
                        </form>            
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->

      <!--Exit Room Modal End-->

      <!--Clear canvas Modal Start -->
          <div id="clearCanvasPrompt" class="modal fade">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title mx-auto" style="text-align: center;width: 100%">Are you sure to clear the board ?</h5>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form role="form" action="">                          
                            <div class="form-group">
                                <div style="text-align: center;">
                                    <button type="button" class="btn btn-danger" ng-click="clearBoard(1)">Clear my Drawings</button>
                                    <button type="button" class="btn btn-danger" ng-click="clearBoard(2)">Clear Everything</button>
                                    <button type="button" class="btn btn-success" data-dismiss="modal">Cancel</button>
                                </div>
                                
                            </div>
                        </form>            
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->

      <!--Clear canvas Modal End-->

      <div id="main-container" ng-cloak="isMesiboConnected()">
         <div class="row no-gutters h-100" style="background-color: white;">
            <div class="col-3" style="border-right: 1px solid  rgb(240,240,240);-webkit-background-clip: padding-box;background-clip: padding-box;" ng-show="!ultra_full_screen_mode">
              
               <div class="panel panel-default" ng-show="room.publish == 1" style="background-color: #787878">
                        <div class="panel-body   self-publisher-panel" id="video-publisher-panel" style="border: 2px solid white;">
                                <div class="d-flex h-100 justify-content-center">
                                  <div class="row" ng-show="publisher.streamOptions" style="position: fixed; margin-top: 4rem; text-align: center; z-index: 100"> 
                                    <i class='fa fa-camera col-12 my-auto'  ng-click="streamFromCamera()" style = "cursor:pointer; color: white;font-size: 1.5em;" title="Camera" ></i>                                   
                                  </div>
                                  <div class="spinner-border text-light" style="position: fixed; margin-top: 4rem" role="status" ng-style="{'display': (!publisher.isConnected && !publisher.streamOptions) ? 'block':'none'}">
                                    <span class="sr-only">Loading...</span>
                                  </div>
                                </div>  
                                
                                <div  class="mx-auto my-auto" style="text-align: center;" id="video-publisher-container">
                                  <video class="centered" id="video-publisher" autoplay playsinline muted width="100%" height="100%" />
                                </div>
                                
                                <div class="loss-indicator" style="background-color: hsl(0, 0%, 0%, 0.4); width: 40px;top:40px; left:0px; position: absolute; cursor: pointer;" title="Loss: -50%" >
                                  <div>                                    
                                    &nbsp;<i style="font-size: 10px; color: red; display: inline;" class="fa fa-circle"></i>
                                    <span style="font-size: 8px; color: white; display: inline; padding-bottom: 20px">-50%</span>
                                  </div>                                    
                                </div> 

                                <div class="stream-options" ng-show="publisher.isConnected" style="top:2px; right:2px; position: absolute; background-color: hsl(0, 0%, 0%, 0.4); width: 30px; font-size: 15px; text-align: center;" ng-style="{'display': publisher.getMuteStatus(true) || publisher.getMuteStatus(false) ?'block':''}">
                                    <a href="#" style="color: white; display: block;"><i ng-class="getAudioStatusClass(publisher)" ng-click="toggleSelfAudio()" ng-attr-title="{{ !publisher.getMuteStatus(false) ? 'Mute Audio': 'Unmute Audio'}}" ></i></a>
                                    <a href="#" style="color: white;display: block;" ><i ng-class="getVideoStatusClass(publisher)" ng-click="toggleSelfVideo()" ng-attr-title="{{ !publisher.getMuteStatus(true) ? 'Mute Video': 'Unmute Video'}}"></i></a>
                                    <a href="#" style="color: white;display: block;" ><i class="fas fa-expand" ng-click="openFullscreen('video-publisher', getStreamId(publisher), publisher)" title="Full Screen"></i></a>
                                    <a href="#" style="color: white;display: block;" ><i class="fa fa-times" ng-click="MesiboGroupcall_OnHangup(publisher, MESIBOCALL_HANGUP_REASON_USER)" title="Hangup" ></i></a>
                                </div>                               
                        </div>                        
                </div>


               <div class="mx-auto text-white px-2 rounded" style="background-color: #00868b; color: white; width: 100%; text-align: center; margin-bottom: 2px; margin-top: 2px">Notifications</div>
              <div id="ticker_messages_area" style="text-align: left; overflow-x: hidden; overflow-y: scroll; bottom: 0; height: 100px"> 
                <div  class="d-flex flex-row w-100" ng-repeat="msg in ticker_messages track by $index" ng-if="ticker_messages[$index] != null" tabindex="0" style="padding-right: 5px; padding-top: 2px">
                 
                  <div class="ticker_message col-12">
                      <div class="name" style="font-size: 14px;"><strong>{{ticker_messages[$index].time}}</strong>: {{ticker_messages[$index].message}}</div>
                  </div>
                </div>

               </div>
               
               <!-- <button type="button" ng-click="addTicker()">Add ticker</button>  -->


              <div class="mx-auto my-1 text-white py-0 px-2 rounded" style="background-color: #00868b; color: white; width: 100%; text-align: center; ">Participants
              <i class="fa fa-comments" aria-hidden="true" ng-click="showPopupChat()" style = "cursor:pointer;padding-left: 10px; padding-right: 10px" title="Group Chat"></i>
              </div>
              <div style="text-align: center; color: grey; font-style: italic;" ng-if="participants.length==0"> {{participant_list_placeholder}}                  
              </div>
              <div id="participant-list" style="overflow-y: scroll; max-height: 25%;"> 
                <div class="participant-list-item d-flex flex-row w-100 p-2 border-bottom" ng-repeat="participant in participants track by $index" ng-if=" participants[$index] != null" ng-click="selectStream(participant)" tabindex="0" style="padding-right: 5px">
		  <!--<input type="checkbox"  ng-checked=" participants[$index].isVisible == true" ng-click=
	    "toggleStreamVisibility(participant)"> -->

                  <div class="col-8">
                      <div class="name" style="font-size: 12px;">&nbsp;{{participants[$index].getName()}}</div>
                  </div>

                  <div class="flex-grow-1 text-right" style="font-size:12px; padding-left: 10px">
                     <i class="fas fa-comment-alt" aria-hidden="true" ng-click="showPopupChat(participants[$index])" style="cursor:pointer; color: grey" id="chat_popup_participant_{{ participants[$index].getAddress()}}" title="Chat"></i>
                  </div> 
                  <div class="flex-grow-1 text-right" style="font-size:12px; padding-left: 10px">
                     <i class="fa fa-phone popup-make-voice-call" aria-hidden="true" style="cursor:pointer; color: #00868b" ng-click="callParticipant(participants[$index], true, false)" title="Audio Only Call"></i>
                  </div> 
                  <div class="flex-grow-1 text-right" style="font-size:12px; padding-left: 10px">
                     <i class="fa fa-video popup-make-video-call" aria-hidden="true;" style="cursor:pointer; color: #00868b" ng-click="callParticipant(participants[$index], true, true)" title="Call"></i>
                  </div>                                        
                </div> 
               </div>    

            </div>

          
            <!-- Streams Area -->
            
            <div class="d-none d-flex flex-column col-9" id="streams-area" style="border:0px solid orange; background-color: #787878">
                <div class="col-10" style="text-align: center;" ng-if="!isBoardMode && streams.length==0">                  
                  <div class="mx-auto"  style="color: white;font-style: italic; margin: auto; font-size: 30px">  
                    <p style="margin-top: 30%; "> You are currently the only person in this conference! </p>                </div>
                  <button type="button" class="btn btn-info" style="background-color: #00868b" onclick="showInviteForm()" ng-if="room.pin && room.spin"  ><i class="fa fa-user-plus" aria-hidden="true" title="Invite"></i> Invite Family and Friends
                  </button>
                </div>
                

		<div class="row no-gutters" ng-show="!isBoardMode && !expanded_video_selected" id="grid-container">
			
			<span class="pt-2 pb-2" ng-show="room.duration && showConfLimits && streams && streams.length" style="background-color: #ff6347; width: 100%; text-align: center;">
				<span style="color: white; margin-bottom: 0!important;cursor: pointer; font-size: 15px;"> <span  ng-click="showConfLimitsModal(); hideConfLimits();">In this demo, call duration is limited to {{room.duration}} minutes. <u>Remove limits</u></span>
				<button style="display: inline-block; color: white;" type="button" class="close btn-lg mx-2" aria-label="Close" ng-click="hideConfLimits()">
					<span aria-hidden="true">&times;</span>
				</button>
				</span>
			</span>

			<div ng-repeat="s in streams track by $index" ng-class="{'col-12': grid_mode==1, 'col-6': grid_mode==2, 'col-4': grid_mode==3, 'col-3': grid_mode==4,'stream-thumbnail-block-selected': streams[$index].isSelected, 'stream-thumbnail-block': !streams[$index].isSelected, 'stream-thumbnail-block': streams[$index].isVisible, 'stream-thumbnail-block-hidden': !streams[$index].isVisible}" on-finish-render="onStreamsRendered" id="stream-container-{{$index}}">
                        <div style="text-align: center;">
                                  <div style="background-color: #787878;">   
                                    <div class="mx-auto" style="top:0; position:absolute;color: white; text-align: left; font-size: 15px; z-index: 100; cursor: default;" ng-style="{'font-size': grid_mode >= 3 ? '15px' : '20px'}" >                                      
                                      <div style="background-color: hsl(0, 0%, 0%, 0.4); display: inline;" ng-if="display_names">&nbsp;{{getStreamName(streams[$index])}}&nbsp;</div>
                                      <div>
                                        <i style="color:  #98FB98;background-color: hsl(0, 0%, 0%, 0.4); cursor: default; padding-left: 5px" class="fas fa-bullhorn"  ng-style="{'display': streams[$index].isTalking() ?'inline-block':'none'}" title="Talking..."></i>
                                        <i style="color:  #FF6347; background-color: hsl(0, 0%, 0%, 0.4); cursor: default;padding-left: 5px" class="fas fa-microphone-slash"  ng-style="{'display': streams[$index].getMuteStatus(false) ?'inline-block':'none'}" title="Remote Audio Muted"></i>
                                      </div>                                       
                                    </div>
                                    <div class="text-center" style="position:absolute;left:0; right:0;top:40%; bottom:0;margin:auto; display: none" ng-style="{'display': streams[$index].isConnected ?'none':'block'}">
                                      <div class="spinner-border text-light" role="status">
                                        <span class="sr-only">Loading...</span>
                                      </div>
                                    </div>
                                  

                                    <div style="position:absolute;left:0; right:0;top:40%; bottom:0;margin:auto;">
                                      <div>                                        
                                        <i style="color: #FF6347; display: none; font-size: 30px; cursor: pointer; display: none;" class="fas fa-video-slash" ng-style="{'display': streams[$index].getMuteStatus(true) ?'block':'none'}"  title="Remote Video Muted"></i>
                                      </div>
                                    </div>

                                    <div style="text-align: center;" id="video-container-{{getStreamId(streams[$index])}}">
                                      <video class="centered" ng-click="grid_mode==1 ? '' : expandStream(streams[$index], true)"  id="video-{{getStreamId(streams[$index])}}"  width= "100%" height="100%" autoplay playsinline />
                                    </div>  

                                  <div class="stream-options" style="top:2px; right:2px; position: absolute; background-color: hsl(0, 0%, 0%, 0.4); width: 30px;" ng-style="{'display': streams[$index].getMuteStatus(true) || streams[$index].getMuteStatus(false) ?'block':'', 'font-size': grid_mode >= 3 ? '10px' : '15px'}">
				    <a href="#" ng-style="{'color': admin_mode?'red':'white'}" style="display: block;"><i ng-class="getAudioStatusClass(streams[$index])" ng-click="toggleRemoteMute(streams[$index], false);" ng-attr-title="{{ streams[$index].getMuteStatus(false) == false ? 'Mute Audio': 'Unmute Audio'}}" ></i></a>
                                    <a href="#" ng-style="{'color': admin_mode?'red':'white'}" style="display: block;" ><i ng-class="getVideoStatusClass(streams[$index])" ng-click="toggleRemoteMute(streams[$index], true);" ng-attr-title="{{ streams[$index].getMuteStatus(true) == false ? 'Mute Video': 'Unmute Video'}}"></i></a>

                                    <a href="#" style="color: white;display: block;" ng-show="grid_mode!=1 && !streams[index].getMuteStatus(true) && !streams[index].getMuteStatus(true)" ><i ng-class="getExpandedScreenStatusClass(streams[$index])" ng-click="expandStream(streams[$index], true)" ng-attr-title="{{ streams[$index].isExpandedScreen? 'Compress': 'Expand'}}"></i></a>

                                    <a href="#" style="color: white;display: block;" ng-show="!streams[index].getMuteStatus(true) && !streams[index].getMuteStatus(true)"><i class="fas fa-expand" ng-click="openFullscreen('video-', getStreamId(streams[$index]), streams[$index])" title="Full Screen"></i></a>
                                     <a href="#" style="color: white;display: block;" ><i class="fas fa-comment-alt" ng-click="showPopupChat(streams[$index])" title="Chat"></i></a>
                                    <a href="#" ng-style="{'color': admin_mode?'red':'white'}" style="display: block;" ><i class="fa fa-times" ng-click="hangup(streams[$index])" title="Hangup"></i></a>
                                  </div>
                                  </div>
                        </div>
                    </div>
                  </div>


                <div id="expanded_drawingboard_body" ng-show ="isBoardMode" style="padding: 1px !important; overflow: hidden;" ng-style="{'background-color': !_canvas ? '#3F704D':'transparent'}">
                  
                  <div class="spinner-grow text-light" style="position: absolute; top: 45%; left: 50%;width: 3rem; height: 3rem;" role="status" ng-if="!_canvas">
                    <span class="sr-only">Loading...</span>
                  </div>

                  <canvas id="main-canvas" style="width: 100%; height: 100%"></canvas>                
                  

                  <!-- Top toolbox -->
                  <section id="top-tool-box" class="top-tool-box row no-gutters">

                    <div class="col-8" ng-show="room.publish">
                      <span title="mesibo">
                        <img  style="width: 40px; height: 40px;" src="./drawingboard/images/mesibo-m-logo.png">
                      </span>
                      <span title="Pencil" class="btn"  id="pencil-tool" style="cursor:pointer;display:none"><i class="fa fa-pencil" aria-hidden="true"></i></span>                      
                      <span title="Line" class="btn"  id="line-tool"style="cursor:pointer;display:none;"> | </span>                       
                      <span title="PDF" class="btn"  id="pdf-tool" style="cursor:pointer;display:none"><i class="fa fa-file-pdf-o" aria-hidden="true"></i></span>

                      <span title="Rectangle" class="btn"  id="rectangle-tool" style="cursor:pointer;display:none"><i class="far fa-square " aria-hidden="true"></i></span>
                      <span title="Circle" class="btn"  id="arc-tool" style="cursor:pointer;display:none"><i class="far fa-circle " aria-hidden="true"></i></span>
                      <span title="Filled Circle" class="btn"  id="filled-arc-tool" style="cursor:pointer;display:none"><i class="fas fa-circle " aria-hidden="true"></i></span>
                      <span title="Filled Rectangle" class="btn"  id="filled-rectangle-tool" style="cursor:pointer;display:none"><i class="fas fa-square-full " aria-hidden="true"></i></span>
                      

                      <div title="Select thickness" class="slidecontainer" id="line-width" style="display: none;">
                        <label style="font-size: 17px;" for="line-width-text">Thickness: </label>
                        <input id="line-width-text" style="margin-top: 10px;" type="range" min="1" max="50" value="1">
                      </div>


                      <select id="font-style-options" style="display: none;">
                        <optgroup style="font-family:Arial">
                          <option value="Arial">Arial</option>
                        </optgroup>
                        <optgroup style="font-family:Arial Black">
                          <option value="Arial Black">Arial Black</option>
                        </optgroup>                            
                        <optgroup style="font-family:Comic Sans MS">
                          <option value="Comic Sans MS">Comic Sans MS</option>
                        </optgroup>
                        <!-- <optgroup style="font-family:Courier New">
                          <option value="Courier New">Courier New</option>
                        </optgroup> -->
                        <optgroup style="font-family:Georgia">
                          <option value="Georgia">Georgia</option>
                        </optgroup>
                        <optgroup style="font-family:Tahoma">
                          <option value="Tahoma">Tahoma</option>
                        </optgroup>
                        <optgroup style="font-family:Times New Roman">
                          <option value="Times New Roman">Times New Roman</option>
                        </optgroup>
                        <optgroup style="font-family:Trebuchet MSk">
                          <option value="Trebuchet MS">Trebuchet MS</option>
                        </optgroup>
                        <optgroup style="font-family:Verdana">
                          <option value="Verdana">Verdana</option>
                        </optgroup>                                
                      </select>

                      <select id="font-size-options" style="display: none;">
                        <option value='15'>15</option>
                        <option value='17'>17</option>
                        <option value='19'>19</option>
                        <option value='20'>20</option>
                        <option value='22'>22</option>
                        <option value='23'>25</option>
                        <option value='30'>30</option>
                        <option value='35'>35</option>
                        <option value='42'>42</option>
                        <option value='48'>48</option>
                        <option value='60'>60</option>
                        <option value='72'>72</option>
                      </select>

                      <span style="display: none;" id="text-format-options">
                        <span title="Bold" class="btn"  id="text-bold-option" style="cursor: pointer;"><i class="fa fa-bold" aria-hidden="true"></i></span>
                        <span title="Italic" class="btn"  id="text-italic-option" style="cursor: pointer;"><i class="fa fa-italic" aria-hidden="true"></i></span>                
                      </span>

                    </div>

                    <span class="col-4" style="padding-top: 10px;">
                      <span style="font-size: 1em; float: right; padding-left: 20px;padding-right: 10px;"><strong>DRAWING BOARD</strong><span style="font-size: 10px;font-style: italic;"> Beta </span></span>                                           
                      <span class="col-1" ng-click="toggleBoardMode()" title="Close" class="btn" style="cursor: pointer;float: right;width: 20px;" data-dismiss="modal"><i class="fa fa-times fa-lg" aria-hidden="true" style="color: black"></i></span>
                      <span class="col-1" ng-show="room.publish"  title="Clear" id="clear-canvas" class="btn" style="cursor: pointer;float:right;width: 20px;"><i class="fa fa-trash-o fa-lg" style="color: black"></i></span>
                      <span class="col-1" title="Save as Image" class="btn" style="cursor: pointer;float: right; margin-left: 3px!important;width: 20px;" onclick="saveDrawing()"><i class="fa fa-floppy-o fa-lg" aria-hidden="true" style="color: black"></i></span>                                         
                      <input class="col-1" style="float: right;padding: 0!important; border: 0!important; width: 20px; height: 20px; margin: auto;" id="background-color-input" type="color" title="Change board color">          
                    </span>                                               

                  </section>
                  <!-- toolbox -->
                  <section id="tool-box" class="tool-box" ng-show="room.publish">
                    <span title="Draw" class="btn" style="cursor:pointer; display: block" id="pencil-icon"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></span>
                    <span title="Draw Shape" class="btn" style="cursor:pointer;display: block;" id="rectangle"><i class="far fa-square " aria-hidden="true"></i></span> 
                    <span title="Erase" class="btn" style="cursor:pointer; display: block;" id="eraser-icon"><i class="fa fa-eraser" aria-hidden="true"></i></span> 
                    <span title="Insert Text" class="btn" style="cursor:pointer;display: block;" id="text-icon"><i class="fa fa-font" aria-hidden="true"></i></span>
                    <span title="Insert Image" class="btn"  id="image-icon" style="cursor:pointer;display:block;"><i class="fa fa-picture-o" aria-hidden="true"></i></span> 
                    <span title="Move" class="btn" style="cursor:pointer;display: block" id="move-icon"><i class="fa fa-arrows" aria-hidden="true"></i></span>                     
                    <!-- <span title="undo" class="btn" style="cursor:pointer;display: block;" id="undo"><i class="fa fa-undo" aria-hidden="true"></i></span>
                    <span title="debug" class="btn" style="cursor:pointer;display: block;" id="debug">*</span>          -->

                    <input title="Set foreground color" style="width: 30px; height: 30px;display: block; margin: auto;" id="foreground-color-input" type="color" value="#ffffff">
                    <input  title="Set fill color" style="width: 30px; height: 30px;display: block; margin: auto;" id="fill-color-input" type="color" value="#000000">

                  </section>
            </div> 

                  <div ng-if ="expanded_video_selected && streams.length" on-expanded-screen-render="onExpandedScreenRendered" style="background-color: #787878">
                      <div class="mx-auto" ng-if ="expanded_video_selected" style="top:2px; position:absolute;color: white; text-align: center; font-size: 15px">
                        <div style="background-color: hsl(0, 0%, 0%, 0.4);" ng-if="display_names">
                          &nbsp; {{ getStreamName(expanded_video_selected)}} &nbsp;
                            </div>
                            <div style="float: left;">
                              <i style="color:  #98FB98; cursor: pointer; padding-left: 5px; background-color: hsl(0, 0%, 0%, 0.4);" class="fas fa-bullhorn"  ng-style="{'display': expanded_video_selected.isTalking() ?'inline-block':'none'}" title="Talking..."></i>
                              <i style="color:#FF6347; display: none;cursor: pointer; display: none; padding-left: 5px; background-color: hsl(0, 0%, 0%, 0.4);" class="fas fa-microphone-slash"  ng-style="{'display': expanded_video_selected.getMuteStatus(false) ?'inline-block':'none'}" title="Remote Audio Muted"></i>                            
                           </div>
                      </div>
                      <div ng-show="expanded_video_selected" class="stream-thumbnail-block mx-auto" style="border:0px solid red;" id="expanded-screen-container">
                                              
                        <div class="text-center" style="position:absolute;left:0; right:0;top:40%; bottom:0;margin:auto; display: none" ng-style="{'display': expanded_video_selected.isConnected ?'none':'block'}">
                          <div class="spinner-border text-light" role="status">
                            <span class="sr-only">Loading...</span>
                          </div>
                        </div>  

                        <div style="position:absolute;left:50%; right:0;top:40%;">
                          <div>                                              
                            <i style="color:#FF6347; display: none; font-size: 30px" class="fas fa-video-slash"ng-style="{'display': expanded_video_selected.getMuteStatus(true) ?'block':'none'}"></i>
                          </div>
                        </div>
                        

                        <div style="text-align: center;" ng-show="expanded_video_selected" id="expanded-video-container-{{getStreamId(expanded_video_selected)}}">
                          <video class="centered" id="expanded-video-{{getStreamId(expanded_video_selected)}}" width="100%" height="100%" autoplay playsinline/></video>
                        </div>

                        <div class="row no-gutters" style="position: absolute; top: 2px; right: 40px; width: 184px;max-height: 500px; overflow-y: scroll;">
                          <div class="speaker-preview-block col-12" ng-repeat="preview in preview_streams" ng-if="preview"
                           ng-show="preview && expanded_video_selected!=preview && !preview.getMuteStatus(true) && !preview.getMuteStatus(true)" style="text-align: center;background-color: transparent; height: 104px" id="expanded-speaker-preview-{{getStreamId(preview)}}" on-finish-render="onPreviewRendered">
                            <div class="speaker-preview-options" style="position:absolute;left:30%;top:35%; bottom:0;margin:auto;">
                                  <div class="row">                   
                                    <span class="col-6 speaker-preview-options-button" ng-click="expandSpeakerPreview(preview)" style="cursor: pointer;z-index: 200"><i class="fa fa-expand"  title="Expand Stream"></i></span>
                                    <span class="col-6 speaker-preview-options-button" ng-click="removeSpeakerPreview(preview)" style="cursor: pointer;z-index: 200"><i class="fa fa-times"  title="Hide Stream"></i></span>
                                  </div>
                            </div>                          
                            <video class="centered" id="speaker-preview-video-{{getStreamId(preview)}}" width="100%" height="100%" autoplay playsinline/></video>
                          </div>
                        </div>


                        <div ng-if="expanded_video_selected" style="display: block; text-align: center; top: 2px; right: 2px; position: absolute; background-color: hsl(0, 0%, 0%, 0.4); width: 30px; font-size: 15px;" ng-style="{'display': expanded_video_selected.getMuteStatus(true) || expanded_video_selected.getMuteStatus(false) ?'block':''}">
                            <a href="#" style="color: white; display: block;"><i ng-class="getAudioStatusClass(expanded_video_selected)" ng-click="expanded_video_selected.toggleAudioMute();" ng-attr-title="{{ !expanded_video_selected.getMuteStatus(false) ? 'Mute Audio': 'Unmute Audio'}}"></i></a>
                            <a href="#" style="color: white; display: block;" ><i ng-class="getVideoStatusClass(expanded_video_selected)" ng-click="expanded_video_selected.toggleVideoMute();" ng-attr-title="{{ !expanded_video_selected.getMuteStatus(true) == false ? 'Mute Video': 'Unmute Video'}}"></i></a>
                            <a href="#" style="color: white; display: block;" ><i class="fa fa-th-large" ng-click="enterGridMode(true)" title="Enter Grid Mode"></i></a>
                            
                            <!-- <a href="#" style="color: white; display: block;" ><i class="fa fa-eye" ng-show="expanded_video_selected && !always_show_other_speakers" id="speaker_strip_indicator" aria-hidden="true" style="color: white;cursor: pointer;" title="Show Others" ng-click="showSpeakersStrip(true)"></i></a> -->

                            <a href="#" style="color: white;display: block;" ><i class="fas fa-expand" ng-click="openFullscreen('expanded-video-', getStreamId(expanded_video_selected), expanded_video_selected)" title="Full Screen"></i></a>
                            <a href="#" style="color: white;display: block;" ><i class="fas fa-comment-alt" ng-click="showPopupChat(expanded_video_selected)" title="Chat"></i></a>
                        </div>
                    </div>                                      
                </div>

                <div ng-mouseenter="showSpeakersStrip()" ng-mouseleave="autoHideSpeakersStrip()" ng-show="(isBoardMode || auto_hide_other_speakers || always_show_other_speakers) && thumbnail_streams.length && streams.length" class="horizontal-scroll-stream" id="horizontal-strip-body" style="overflow-y: hidden; background-color: transparent; position: fixed; bottom: 30px; ;margin-left: 60px; margin-right: 60px;" >
                      
                      <div class="strip-scroll-button-exp" ng-show=" (auto_hide_other_speakers || always_show_other_speakers) && thumbnail_streams.length && streams.length" id = "next_speaker_button_left" style="position: fixed; color: #dddddd; bottom: 75px; margin-left: -32px" onclick="document.getElementById('stream_list_horizontal').scrollLeft -= 40; "><i class="fa fa-chevron-left pr-1"></i>
                      </div>
                      <div class="strip-scroll-button-exp" ng-show=" (auto_hide_other_speakers || always_show_other_speakers) && thumbnail_streams.length && streams.length" id = "next_speaker_button_right" style="position: fixed; color:  #dddddd; bottom: 75px;right: 28px;" onclick="document.getElementById('stream_list_horizontal').scrollLeft += 40;"><i class="fa fa-chevron-right pl-1"></i>
                      </div>

                      <div class="row no-gutters flex-nowrap mx-auto" style="max-width: 100%; overflow-y: hidden; overflow-x: hidden;" id="stream_list_horizontal">                                            

                        <div class="strip-thumbnail stream-thumbnail-block col-3" style="max-width: 184px;" 
                        ng-repeat="thumbnail in thumbnail_streams" ng-show="thumbnail && thumbnail != expanded_video_selected && thumbnai!=publisher" ng-click="grid_mode==1 || (expanded_video_selected == thumbnail) ? '' : expandStream(thumbnail, true)" id="parent-video-small-{{getStreamId(thumbnail)}}" on-finish-render="onStripRendered" >
                          <div style="text-align: center;">
                            <div class="panel panel-default">
                               <div class="mx-auto" style="top:0; position:absolute;color: white; text-align: center; font-size: 15px">
                                <div style="background-color: hsl(0, 0%, 0%, 0.4);max-width: 150px; cursor: default; text-overflow: ellipsis;white-space: nowrap;overflow: hidden; z-index: 300" ng-if="display_names" ng-attr-title="{{getStreamName(thumbnail)}}}">
                                &nbsp;{{getStreamName(thumbnail)}}&nbsp;  
                                </div>
                                <div style="float: left;">
                                  <i style="color:  #98FB98;background-color: hsl(0, 0%, 0%, 0.4); cursor: default; padding-left: 5px" class="fas fa-bullhorn"  ng-style="{'display': thumbnail.isTalking() ?'inline-block':'none'}" title="Talking..."></i>
                                  <i style="color: #FF6347; background-color: hsl(0, 0%, 0%, 0.4); cursor: default; padding-left: 5px" class="fas fa-microphone-slash"  ng-style="{'display': thumbnail.getMuteStatus(false) ?'inline-block':'none'}" title="Remote Audio Muted"></i>                              
                                </div>
                               </div>
                                
                            
                              <div class="panel-body"  style="background-color: hsl(0, 0%, 0%, 0.4)">  
                                <div class="text-center" style="position:absolute;left:0; right:0;top:40%; bottom:0;margin:auto; display: none" ng-style="{'display': thumbnail.isConnected ?'none':'block'}">
                                      <div class="spinner-border text-light" role="status">
                                        <span class="sr-only">Loading...</span>
                                      </div>
                                    </div>                                   

                                    <div  style="position:absolute;left:0; right:0;top:40%; bottom:0;margin:auto;">
                                      <div>                                     
                                        <i style="color: #FF6347; display: none; font-size: 30px" class="fas fa-video-slash"ng-style="{'display': thumbnail.getMuteStatus(true) ?'block':'none'}"></i>
                                      </div>
                                    </div>

                                <div style="text-align: center;" id="video-small-container-{{getStreamId(thumbnail)}}">
                                  <video class="centered" id="video-small-{{getStreamId(thumbnail)}}" width="100%" height="100%" autoplay playsinline/></video>
                                </div>

                                <div class="loss-indicator" style="background-color: hsl(0, 0%, 0%, 0.4); width: 30px;top:20px; left:0px; position: absolute; cursor: pointer;" title="Loss: -50%" >
                                  <div>                                    
                                    &nbsp;<i style="font-size: 8px; color: red; display: inline;" class="fa fa-circle"></i>
                                    <span style="font-size: 6px; color: white; display: inline; padding-bottom: 20px">-50%</span>
                                  </div>                                    
                                </div>
                                <div class="stream-options" style="top:1px; right:1px; position: absolute; background-color: hsl(0, 0%, 0%, 0.4); width: 20px; font-size: 10px"  ng-style="{'display': thumbnail.getMuteStatus(true) || thumbnail.getMuteStatus(false) ?'block':''}" ng-show="isBoardMode || expanded_video_selected!= thumbnail">
                                    <a href="#" style="color: white; display: block;"><i ng-class="getAudioStatusClass(thumbnail)" ng-click="thumbnail.toggleAudioMute();" ng-attr-title="{{ !thumbnail.getMuteStatus(false) ? 'Mute Audio': 'Unmute Audio'}}" ></i></a>
                                    <a href="#" style="color: white;display: block;" ><i ng-class="getVideoStatusClass(thumbnail)" ng-click="thumbnail.toggleVideoMute();" ng-attr-title="{{ !thumbnail.getMuteStatus(true) ? 'Mute Video': 'Unmute Video'}}"></i></a>
                                    <a href="#" style="color: white;display: block;" ng-show="!isBoardMode && expanded_video_selected.getId()== thumbnail.getId()" ><i class="fa fa-external-link" ng-click="addPreview(thumbnail)" title="Show Preview"></i></a>

                                    <a href="#" style="color: white;display: block;" ng-show="isBoardMode || grid_mode!=1" ><i ng-class="getExpandedScreenStatusClass(thumbnail)" ng-click="expandStream(thumbnail, true)" ng-attr-title="{{ thumbnail.isExpandedScreen? 'Compress': 'Expand'}}"></i></a>
                                    <a href="#" style="color: white;display: block;" ><i class="fas fa-expand" ng-click="openFullscreen('video-small-', getStreamId(thumbnail), thumbnail)" title="Full Screen"></i></a>
                                     <a href="#" style="color: white;display: block;" ><i class="fas fa-comment-alt" ng-click="showPopupChat(thumbnail)" title="Chat"></i></a>                                    
                                  </div>
                              </div>
                            </div>
                          </div>                              
                        </div>
                      </div>
                  </div>

         </div> 
            
          <div id="sound"></div> 
          <!-- Play notofication sound -->
      </div>
   </div>

   <div id="ModalRoomForm" class="modal fade" style="background: #00868b;">
	   <div class="modal-dialog" style="max-width: 40vw; max-height: 80vh; padding: 100px;" role="document">
		   <div class="modal-content">
	   <div class="modal-header px-0 py-1"> 
		   <div class="row w-100 justify-content-center mx-auto">  
			   <h5 class="modal-title py-2"> Mesibo Live Demo</h5>

			   <div class="row  w-100 justify-content-center" style="text-align: center;">

				   <label  class="col-md-6" style="font-size: 15px"><input type="radio" name="optroom" ng-click="enterRoomForm(this)" checked value="enter" style="vertical-align: -1px"> &nbsp; Enter an Existing Room</label>

				   <label class="col-md-6" style="font-size: 15px"><input type="radio" name="optroom" ng-click="createRoomForm(this)" value="create" style="vertical-align: -1px;"> &nbsp; Create a New Room</label>                                                     
			   </div>

		   </div>
	   </div>
	   <div class="modal-body" style="padding: 5px 10px 5px 10px">					    
		   <form role="form" id ="join-room-form" action="">
			   <input type="hidden" name="_token" value="">
			   <div class="form-group">
				   <div id="room_id_div" style="margin-bottom: 10px" ng-show="roomSelection.mode==0">
					   <label class="control-label" id="room_id_label" >Enter Room-ID</label>
					   <div>
						   <input type="number" class="form-control input-lg" ng-model="room.gid" value="">
					   </div>
				   </div>
				   <div id="room_name_div1" style="margin-bottom: 10px" ng-show="roomSelection.mode==2">
					   <label class="control-label" id="room_name_prompt" required>Room Name</label>
					   <div>
						   <input type="text"  class="form-control input-lg" ng-model="room.name" maxlength="128">
					   </div>
				   </div>
				   <div id="room_password_div" style="margin-bottom: 10px" ng-show="roomSelection.mode==0">
					   <label class="control-label" id="room_password_label" >Enter Pin</label>
					   <div>
						   <input type="number" class="form-control input-lg" ng-model="room.pin" oninput="this.value=this.value.slice(0,this.maxLength)" maxlength="8">
					   </div>
				   </div>
				   <div class="list-group" id="my-rooms-list" style="height: 200px;margin-bottom: 10px;overflow-y:auto; overflow-x: none" ng-show="roomSelection.mode==1">
					   <h5 style="text-align: center;" >My Rooms</h5>
					   <span ng-repeat="r in rooms">
						   <button type="button" class="list-group-item list-group-item-action" style="text-overflow: ellipsis;white-space: nowrap;overflow: hidden;" ng-click="$evalAsync(selectRoom(r.getGroupId()))" ng-dblclick="enterRoom(r.getGroupId(), 0)">Room #{{r.getGroupId()}} - {{r.getName()}}</button>
					    </span>

				   </div>
			   </div>
			   <div class="form-group">
				   <div class="container mx-auto" id="stream-quality-options" ng-show="roomSelection.mode==2">
					   <!-- 								<a style="text-align: center">Set Resolution</a> -->
					   <div class="row" style="text-align: center;">
						   <label class="radio col-3" style="font-size: 15px;"><input type="radio" ng-value="0" ng-model="room.quality" ng-checked="(room.quality == '0')" style="vertical-align: -1px;"> &nbsp; Default</label>                                      

						   <label class="radio col-5" style="font-size: 15px;"><input type="radio"  ng-value="2" ng-model="room.quality" ng-checked="(room.quality == '2')" style="vertical-align: -1px;"> &nbsp; Standard <span style="font-size: 10px">- 640x480</span></label>

						   <label class="radio col-4" style="font-size: 15px;"><input type="radio"  ng-value="3" ng-model="room.quality" ng-checked="(room.quality == '3')" style="vertical-align: -1px;"> &nbsp; HD <span style="font-size: 10px">- 1280x720</span></label>

						   <div class="w-100"></div>

						   <label class="radio col-4  px-0" style="font-size: 15px;"><input type="radio"  ng-value="4" ng-model="room.quality" ng-checked="(room.quality == '4')" style="vertical-align: -1px;"> &nbsp; Full HD<span style="font-size: 10px"> - 1920x1080</span></label>

						   <label class="radio col-4 px-0" style="font-size: 15px;"><input type="radio"  ng-value="5" ng-model="room.quality" ng-checked="(room.quality == '5')" style="vertical-align: -1px;"> &nbsp;4K<span style="font-size: 10px"> - 3840x2160</span></label>

						   <label class="radio col-4" style="font-size: 15px;"><input type="radio"  ng-value="1" ng-model="room.quality" ng-checked="(room.quality == '1')" style="vertical-align: -1px;"> &nbsp;QVGA<span style="font-size: 10px"> - 320x240</span></label>
					   </div>

				   </div>

				   <div style="text-align: center;">
					   <div style="padding-bottom: 20px;">
						   <span ng-if="room.audio"><i id="default_audio_init" class="fas fa-microphone" ng-model="room.audio" ng-click="toggleAudioVideo(false);" style="color: green; cursor: pointer; width: 30px; font-size: 30px" title="Audio Enabled"></i>&nbsp;</span>
						   <span ng-if="!room.audio"><i id="default_audio_init" class="fas fa-microphone-slash" ng-model="room.audio" ng-click="toggleAudioVideo(false);" style="color: red; cursor: pointer; width: 30px; font-size: 30px" title="Audio Disabled"></i>&nbsp;</span>
						   <span ng-if="room.video"><i id="default_video_init" class="fas fa-video" ng-model="room.video" ng-click="toggleAudioVideo(true);" style="color: green; cursor: pointer; width: 40px; font-size: 30px" title="Video Enabled"></i>&nbsp;</span>
						   <span ng-if="!room.video"><i id="default_video_init" class="fas fa-video-slash" ng-model="room.video" ng-click="toggleAudioVideo(true);" style="color: red; cursor: pointer; width: 40px; font-size: 30px" title="Video Disabled"></i>&nbsp;</span>
					   </div>
					   <button type="button" class="btn btn-success" ng-click="joinRoom()" ng-show="roomSelection.mode==0" ng-disabled="room.gid < 1000 || room.pin < 100000">
						   <span class="sr-only">Enter Room...</span>
						   <span id="join-room-button-text">Enter Room</span>
					   </button>
					   <button type="button" class="btn btn-success" ng-click="joinSelectedRoom()" ng-show="roomSelection.mode==1" ng-disabled="selectedRoom==0">
						   <span class="sr-only">Enter Room...</span>
						   <span id="join-room-button-text">Enter Room</span>
					   </button>
					   <button type="button" class="btn btn-success" ng-click="createRoom()" ng-show="roomSelection.mode==2" ng-disabled="room.name.length < 3 || (!room.video && !room.audio)">
						   <span class="sr-only">Create Room...</span>
						   <span id="join-room-button-text">Create Room</span>
					   </button>
					   <button type="button" class="btn btn-success" ng-click="listRooms(true)" ng-show="roomSelection.mode==0">
						   <span class="sr-only">My Rooms...</span>
						   <span id="my-rooms-button-text">My Rooms</span>
					   </button>
					   <button type="button" class="btn btn-success" ng-click="otherRoom()" ng-show="roomSelection.mode==1">
						   <span class="sr-only">Other Room...</span>
						   <span id="my-rooms-button-text">Other Room</span>
					   </button>

					   <button style="margin-top: 1px" type="button" class="btn btn-success" ng-click="logout()">Logout</button>
				   </div> 

			   </div>
		   </form>					               
	   </div>
	   </div>
	   </div>
   </div><!-- /.modal-content --> 

   <!--Invite Modal Start -->
   <div id="ModalInviteForm" class="modal fade">
	   <div class="modal-dialog" style="max-width: 80vw; max-height: 80vh" role="document">
		   <div class="modal-content">
			   <div class="modal-header">
				   <h3 class="modal-title">Copy Invitation</h3>
				   <button type="button" class="close" data-dismiss="modal">&times;</button>
			   </div>
			   <div class="modal-body">
				   <form role="form" method="POST" action="">
					   <div class="form-group">
						   <div class="row" ng-show="pins && pins.length">                                 
							   <div class="col-6 h-100">                                    
								   <div style="max-height: 30%">
									   <p style="font-size: 15px;color: grey;">Send the following invitation text to people who you want to actively participate in the conference. They will be able to make a video or voice call to the conference. </p>
								   </div>

								   <textarea readonly class = "form-control" rows = "10" placeholder = "Join my room" style="font-size: 15px; user-select: none; " id='invite-text-publisher'>Hey,&#13;&#13;{{user.name}} has invited you to join the conference - {{room.name}}.&#13;&#13;To join the conference  - Visit https://mesibo.com/livedemo and use the following credentials:.&#13;&#13;Room ID: {{getRoomId()}} &#13;Pin: {{getPin(1)}}
								   </textarea>                                

								   <div class="mx-auto" style="text-align: center; padding-top: 10px">
									   <button type="button" class="btn btn-success btn-sm" ng-click="copyInviteText(true)" style="background-color: #00868b">
										   <i class="fa fa-copy" style="color: white; padding-right: 5px"></i>Copy Invite</button>
								   </div> 
							   </div>

							   <div class="col-6 h-100">                                    
								   <div style="max-height: 30%">
									   <p style="font-size: 15px;color: grey;">Send the following invitation text to people who you want to silently participate in the conference. <strong>They will not be able to make a call -but they will be able to view the conference</strong>. </p>
								   </div>

								   <textarea readonly class = "form-control" rows = "10" placeholder = "Join my room" style="font-size: 15px; user-select: none; " id='invite-text-subscriber'>Hey,&#13;&#13;{{user.name}} has invited you to join the conference - {{room.name}}.&#13;&#13;To join the conference  - Visit https://mesibo.com/livedemo and use the following credentials:.&#13;&#13;Room ID: {{room.gid}} &#13;Pin: {{getPin(0)}}
								   </textarea>                                

								   <div class="mx-auto" style="text-align: center; padding-top:10px">
									   <button type="button" class="btn btn-success btn-sm" ng-click="copyInviteText(false)" style="background-color: #00868b">
										   <i class="fa fa-copy" style="color: white; padding-right: 5px"></i>Copy Invite</button>
								   </div> 
							   </div>




						   </div>                                                                                                                                  
					   </div>
			   </div>
				   </form>            
		   </div>
	   </div><!-- /.modal-content -->
   </div><!-- /.modal-dialog -->
   </div><!-- /.modal -->
   <!--Invite Modal End -->

   <!-- Chat popup start-->
   <div id="Smallchat">
	   <div class="Layout Layout-open Layout-expand Layout-right popup-main-div" id="popup_chat" style="background-color: #3F51B5;color: rgb(255, 255, 255);opacity: 5;border-radius: 10px; bottom: 0; margin-right: 10px!important;">
		   <div class="Messenger_messenger">
			   <div class="Messenger_header" style="background-color:#00868b ; color: rgb(255, 255, 255); cursor: move;">
				   <div class="row" style="padding-left: 20px">
					   <p class="Messenger_prompt popup_display_name"  id ='popup_display_name' style="font-size:18px; padding-top:8px"> Name </p> 
					   <!-- <p class="text-white-small popup_status_indicator" style=" font-size:11px" id="popup_status_indicator" >Online</p> -->
				   </div>
				   <span class="chat_features">                

					   <span style="padding-left: 10px" class="chat_close" id = "popup_chat_close">
						   <svg viewBox="0 0 12 12" width="14px" height="14px">
							   <line stroke="#FFFFFF" x1="11.75" y1="0.25" x2="0.25" y2="11.75"></line>
							   <line stroke="#FFFFFF" x1="11.75" y1="11.75" x2="0.25" y2="0.25"></line>
						   </svg>
					   </span>

				   </span> 

			   </div>
			   <div class="Messenger_content" style="overflow: hidden;">
				   <div class="Messages" id='scrollMessage'>
					   <div class="Messages_list" id="msglist">
						   <div class="popup-message-area" >
							   <div class="popup-message-area-1">
								   <div class= "popup-message-area-2">
									   <div  style="max-width: 300px;overflow-wrap: break-word;">
										   <div class="popup-message-area-sender-name" style="color: black; font-weight: bold; font-size: 15px"></div>                                                    
									   </div> 
									   <a class="popup-message-area-file"  target="_blank" style="max-width: 300px;" >
										   <div  class= "popup-message-area-image image-holder"><img class= "popup-message-area-image-src"  style="cursor:pointer;"/>
										   </div>
										   <div class= "popup-message-area-video image-holder"><video class= "popup-message-area-video-src" controls="controls" preload="true" style="max-width: 300px;overflow: hidden;cursor:pointer;" />
										   </div>
										   <div class= "popup-message-area-audio image-holder"><audio class= "popup-message-area-audio-src" controls="controls" preload="true" style="max-width: 300px;overflow: hidden;cursor:pointer;" />
										   </div>
										   <div class= "popup-message-area-other image-holder"><img ng-src= "assets/images/file/default_file_icon.jpg" style="cursor:pointer;" />
										   </div>
									   </a>
									   <div  style="max-width: 300px;overflow-wrap: break-word;">                                                   
										   <div class="popup-message-area-message-text" style="font-size: 15px"></div>                          
									   </div>                                              
								   </div>
							   </div>
							   <div class="d-flex flex-row popup-message-area-details">
								   <div class="time ml-auto small text-muted mx-0 popup-message-area-details-1"  style="font-size: 11px; margin-left: 0!important">
									   <span class="popup-message-area-message-time"></span>
									   <i class="popup-message-area-message-status"></i>
								   </div>
							   </div>                    
						   </div>
					   </div>
					   <!-- Anchor to Scroll -->
					   <div class="popup-message-area-anchor-end" id="messages_end">&nbsp;</div>
				   </div>
				   <div class="Input Input-blank" style="overflow: none">
					   <textarea onkeyup="textAreaAdjust(this)" ng-model="input_message_text" class="Input_field popup-message-area-message-input" placeholder="Send a message..." style="height: 20px;" id='inputfield'></textarea>


					   <button class="Input_button Input_button-emoji" title="Add Attachment">
						   <div class="Icon" style="width: 18px; height: 18px;">
							   <input  id="upload" type="file" onchange="angular.element(this).scope().onFileSelect(this)" style="padding-left: : 5px; display: none;">
							   <i id="file-upload" class="fa fa-paperclip popup-message-area-upload-file" style="padding-left:5px; color: #96aab4;"></i>
						   </div>
					   </button>


					   <button class="Input_button Input_button-send popup-message-area-message-input-send" title="Send" >
						   <div class="Icon" style="width: 18px; height: 18px;">
							   <svg width="57px" height="54px" viewBox="1496 193 57 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="width: 18px; height: 18px;">
								   <g id="Group-9-Copy-3" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(1523.000000, 220.000000) rotate(-270.000000) translate(-1523.000000, -220.000000) translate(1499.000000, 193.000000)">
								   <path d="M5.42994667,44.5306122 L16.5955554,44.5306122 L21.049938,20.423658 C21.6518463,17.1661523 26.3121212,17.1441362 26.9447801,20.3958097 L31.6405465,44.5306122 L42.5313185,44.5306122 L23.9806326,7.0871633 L5.42994667,44.5306122 Z M22.0420732,48.0757124 C21.779222,49.4982538 20.5386331,50.5306122 19.0920112,50.5306122 L1.59009899,50.5306122 C-1.20169244,50.5306122 -2.87079654,47.7697069 -1.64625638,45.2980459 L20.8461928,-0.101616237 C22.1967178,-2.8275701 25.7710778,-2.81438868 27.1150723,-0.101616237 L49.6075215,45.2980459 C50.8414042,47.7885641 49.1422456,50.5306122 46.3613062,50.5306122 L29.1679835,50.5306122 C27.7320366,50.5306122 26.4974445,49.5130766 26.2232033,48.1035608 L24.0760553,37.0678766 L22.0420732,48.0757124 Z" id="sendicon" fill="#96AAB4" fill-rule="nonzero"></path>
								   </g>
							   </svg>
						   </div>
					   </button>               
				   </div>
			   </div>
		   </div>
	   </div>

	   <!--=============== Conf Demo limits modal start ===============-->
	   <div class="container">
		   <div class="modal fade" id="confDemoLimits" tabindex="-1" role="dialog" aria-hidden="true" >
			   <div class="modal-dialog modal-dialog-centered" style="max-width: 50vw; max-height: 50vh"  role="document">
				   <div class="modal-content">
					   <div class="modal-header">
						   <h4 class="modal-title" id="screen-share-id">Demo Limits</h4>
						   <button type="button" class="close" data-dismiss="modal" ng-click="closeScreenSharePreview();" aria-label="Close">
							   <span aria-hidden="true">&times;</span>
						   </button>
					   </div>

					   <div class="modal-body">
						   <span> Since this is a demo application, there are fair usage limits on the call duration. However, you can download the entire source code from <a href="https://github.com/mesibo/conferencing">Github</a>, <a href="">host it on your own server</a> to enjoy unlimited calls, without any limitations </span> 

						   <div class="d-flex justify-content-center my-2">
							   <a  href="https://mesibo.com/conferencing" target="_blank" style="color: black; text-decoration: none;padding-right: 10px" ><i class="fa fa-home"></i> Home</a>
							   <a  href="https://mesibo.com/documentation/conferencing" target="_blank" style="color: black; text-decoration: none; padding-right: 10px" ><i class="fa fa-book"></i> Documentation</a>
							   <a  href="https://github.com/mesibo/conferencing" target="_blank" style="color: black; text-decoration: none;"><i class="fab fa-github"></i> Source Code</a>
						   </div>

						   <div style="text-align: center;" class="mx-auto">
							   <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
						   </div>           
					   </div>
				   </div>
			   </div>
		   </div>
	   </div>
   </div>
   <!--=============== Conf Demo limits end===============-->

   <!--=============== Screen Share Preview modal start ===============-->
   <div class="container">
	   <div class="modal fade" id="screenSharePreview" tabindex="-1" role="dialog" aria-hidden="true" >
		   <div class="modal-dialog" role="document">
			   <div class="modal-content">
				   <div class="modal-header">
					   <h7 class="modal-title" id="screen-share-id">Sharing Screen-</h7>
					   <button type="button" class="close" data-dismiss="modal" ng-click="closeScreenSharePreview();" aria-label="Close">
						   <span aria-hidden="true">&times;</span>
					   </button>
				   </div>

				   <div class="modal-body">
					   <div  class="mx-auto my-auto" style="text-align: center;width:320px;">
						   <video class="centered" id="screen-share-preview" style="height: 180px" autoplay playsinline muted width="100%" />
					   </div> 
					   <div style="text-align: center;" class="mx-auto">
						   <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
					   </div>           
				   </div>
			   </div>
		   </div>
	   </div>
   </div>
   </div>
   <!--=============== Screen Share Preview end===============-->


   <!--=============== File modal start===============-->
   <div class="container">
	   <div class="modal fade" id="fileModal" tabindex="-1" role="dialog" aria-labelledby="fileModalLabel" aria-hidden="true" >
		   <div class="modal-dialog" role="document">
			   <div class="modal-content">
				   <div class="modal-header">
					   <h7 class="modal-title" id="fileModalLabel">Selected File: </h7>
					   <button type="button" class="close" data-dismiss="modal" ng-click="closeFilePreview();" aria-label="Close">
						   <span aria-hidden="true">&times;</span>
					   </button>
				   </div>

				   <div class="modal-body" id="fileBody" style="width: 300px;margin: auto;">
					   <div class="file-preview-holder" style="display: flex;justify-content: center; max-height: 400px">
						   <img  id = 'image-preview' src="">
						   <video id = 'video-preview' controls="controls" preload="true"  src=""></video> 
						   <!-- Image/video/Docs custom holder elements -->
					   </div>
					   <div style="display: flex;flex-direction: row;">                   
						   <input ng-model="input_file_caption" type="text" name="caption" id="file-caption" placeholder="Add caption" style="width:200px; margin:auto" class="flex-grow-1 border-0 px-3 py-2 my-1 rounded shadow-sm">
						   <div>
							   <i id="popup-send-file" class="fa fa-paper-plane text-muted px-3 my-3" style="cursor:pointer; display: inline-block;"></i>
						   </div>
					   </div>

				   </div>
			   </div>
		   </div>
	   </div>
   </div>
   <!--=============== File modal end===============-->
   </div>
   <!-- Chat popup end -->

   <script type="text/javascript">

	   if(isMobileDetected()){
		   if(navigator.userAgent.toLowerCase().indexOf("android") > -1) {
			   window.location.href = 'https://play.google.com/store/apps/details?id=com.mesibo.mesiboapplication';
		   }
		   else if(navigator.userAgent.toLowerCase().indexOf("iphone") > -1) {
			   window.location.href = 'https://itunes.apple.com/us/app/mesibo-realtime-messaging-voice-video/id1222921751';
		   } else {
			   alert('For a better experience using the Sample Conferencing App, it is recommended that you use it on a desktop. The native mobile version, for Android & iOS is currently under development.');
			   window.open("mobile.html","_self");
		   }
	   }

if(isBrowserOutdated())
	alert('Please update to the latest version of your browser, for a better experience using the Sample Conferencing App');

   </script>

</body>

</html>
